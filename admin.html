<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… ARENA | ZEWEIL âš¡</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;900&display=swap" rel="stylesheet">
    <style>
        body { background: #080808; color: white; font-family: 'Cairo'; text-align: center; padding: 50px; }
        .admin-box { background: #111; border: 2px solid #0f0; padding: 30px; border-radius: 20px; max-width: 500px; margin: auto; box-shadow: 0 0 30px rgba(0,255,0,0.1); }
        input { width: 90%; padding: 15px; margin: 20px 0; border-radius: 10px; border: 1px solid #333; background: #000; color: #fff; font-family: 'Cairo'; text-align: center; font-size: 1.1rem; }
        .btn { padding: 15px 30px; border: none; border-radius: 10px; font-weight: 900; cursor: pointer; margin: 5px; width: 45%; font-size: 1rem; }
        .btn-lock { background: #ff003c; color: white; }
        .btn-unlock { background: #0f0; color: black; }
        .status { margin-top: 25px; font-weight: bold; padding: 15px; border-radius: 10px; background: #000; border: 1px dashed #333; }
    </style>
</head>
<body>

<div class="admin-box">
    <h1 style="color:#0f0">Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ ARENA âš¡</h1>
    <hr style="border: 0.5px solid #222;">
    
    <p>Ø§ÙƒØªØ¨ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙŠ Ø³ØªØ¸Ù‡Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¹Ù†Ø¯ Ø§Ù„Ù‚ÙÙ„:</p>
    <input type="text" id="lock-msg" placeholder="Ù…Ø«Ø§Ù„: Ù†Ø¹ØªØ°Ø±.. ØµÙŠØ§Ù†Ø© Ù„Ù…Ø¯Ø© 10 Ø¯Ù‚Ø§Ø¦Ù‚">
    
    <div style="display: flex; justify-content: space-between;">
        <button class="btn btn-lock" onclick="setLock(true)">ğŸ”’ Ù‚ÙÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
        <button class="btn btn-unlock" onclick="setLock(false)">ğŸ”“ ÙØªØ­ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
    </div>

    <div id="status-display" class="status">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
</div>

<script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
    const firebaseConfig = { databaseURL: "https://zeweil-chat-default-rtdb.europe-west1.firebasedatabase.app" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const globalRef = db.ref('site_settings');

    // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ù‚ÙÙ„ ÙˆØ§Ù„ÙØªØ­
    function setLock(isLocked) {
        const msg = document.getElementById('lock-msg').value;
        if (isLocked && !msg) return alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø£ÙˆÙ„Ø§Ù‹!");
        
        globalRef.update({
            maintenance: isLocked,
            alertMessage: msg || ""
        }).then(() => {
            alert(isLocked ? "ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ù†Ø¬Ø§Ø­" : "ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹");
        }).catch(err => {
            alert("Ø­Ø¯Ø« Ø®Ø·Ø£: " + err.message);
        });
    }

    // Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±
    globalRef.on('value', snap => {
        const d = snap.val() || {};
        const display = document.getElementById('status-display');
        if (d.maintenance) {
            display.innerHTML = "Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: <span style='color:#ff003c'>Ù…ØºÙ„Ù‚ ğŸ”´</span><br><small>Ø§Ù„Ø±Ø³Ø§Ù„Ø©: " + (d.alertMessage || "Ù„Ø§ ØªÙˆØ¬Ø¯") + "</small>";
        } else {
            display.innerHTML = "Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: <span style='color:#0f0'>ÙŠØ¹Ù…Ù„ ğŸŸ¢</span>";
        }
    });
</script>
</body>
</html>
